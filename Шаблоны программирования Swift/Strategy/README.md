# Strategy
<img src="https://github.com/dinozavr2005/ios-library/blob/main/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D1%8B%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%20Swift/Strategy/strategy-design-temlate_proSwift_ru.png"/>
Если Ваша девушка злая, вы скорее всего будете общаться с ней осторожно. Если на вашем проетке завал, то вероятнее всего вы не будете предлагать в команде вечерком дернуть пива или поиграть в компьютерные игры. В различных ситуациях, у нас могут быть очень разные стратегии поведения. К примеру, в приложении вы можете использовать различные алгоритмы сжатия, в зависимости от того с каким форматом картинки вы работаете, или же куда вы хотите после этого картинку деть. Вот мы и добрались до паттерна Стратегия.
Также отличным примером может быть MVC паттерн – в разных случаях мы можем использовать разные контроллеры для одного и того же View (к примеру авторизированный и не авторизированный пользователь).
Паттерн Стратегия определяет семейство алгоритмов, которые могут взаимозаменяться.
Когда использовать паттерн:

Вам необходимы различные алгоритмы
Вы очень не хотите использовать кучу вложенных If-ов
В различных случаях ваш класс работает по разному
Давайте напишем пример – RPG игра, в которой у вас есть различные стратегии нападения Вашими персонажами:) Каждый раз когда вы делаете ход, ваши персонажи делают определенное действие. Итак, для начала управление персонажами!
Создадим базовую стратегию:

```swift
protocol BasicStrategy {
    func actionPerson1()
    func actionPerson2()
    func actionPerson3()
}
```
Как видно из кода стратегии – у нас есть 3 персонажа, каждый из которых может совершать одно действие! Давайте научим персонажей нападать!
```swift
class AttackStrategy: BasicStrategy {

    func actionPerson1() {
        print("Герой 1 - атакуй всех врагов")
    }
    
    func actionPerson2() {
        print("Герой 2 - атакуй всех врагов")
    }

    func actionPerson3() {
        print("Герой 3 - атакуй всех врагов")
    }
}
```
При использовании такой стратегии наши персонажи нападают на все что движется! Давайте научим их защищаться:
```swift
class DefenceStrategy: BasicStrategy {
    
    func actionPerson1() {
        print("Герой 1 - атакуй всех врагов")
    }
    
    func actionPerson2() {
        print("Герой 2 - Лечи героя 1")
    }
    
    func actionPerson3() {
        print("Герой 3 - защищай героя 2")
    }
}
```
Во время защитной стратегии, наши персонажи действуют по-другому – кто атакует, кто лечит, а некоторый даже защищают:) Ну, теперь как-то надо это все использовать. Давайте создадим нашего игрока:
```swift
class Player {
    var strategy: BasicStrategy
    
    func makeAction() {
        self.strategy.actionPerson1()
        self.strategy.actionPerson2()
        self.strategy.actionPerson3()
    }
    
    func changeStrategy(aStrategy: BasicStrategy) {
        self.strategy = aStrategy
    }
    
    init(strategy: BasicStrategy) {
        self.strategy = strategy
    }
}
```
Наш игрок может только менять стратегию и действовать в зависимости от этой стратегии. Код для тестирования:
```swift
let a = AttackStrategy()
let d = DefenceStrategy()

let p = Player(strategy: a)
p.makeAction()
print("- - - - - - -")
p.changeStrategy(d)
p.makeAction()

//console:
Герой 1 - атакуй всех врагов
Герой 2 - атакуй всех врагов
Герой 3 - атакуй всех врагов
- - - - - - -
Герой 1 - атакуй всех врагов
Герой 2 - Лечи героя 1
Герой 3 - защищай героя 2
```
